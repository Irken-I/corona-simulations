# Corona Simulations

https://futu-corosim-proto.netlify.com/

Note that this is WIP that was quickly hacked together to respond to the crisis.

## Initial setup

```bash
npm install
```

## Development

Fetch the latest data with:

```bash
npm run update-data
```

Run the app in a development environment with:

```bash
npm run dev
```

Navigate to [localhost:5000](http://localhost:5000). You should see your app running. Edit a component file in `src`, save it, and reload the page to see your changes.

## Production build

```bash
npm run build
```

Production build begins by fetching the latest data, and then runs a regular Svelte production build.

## Production deployment

- The `master` branch is automatically built and deployed every 3 hours, using [GitHub workflows and Netlify build hooks](https://ericjinks.com/blog/2019/netlify-scheduled-build/).
- In addition, commits trigger a build.
- During build, latest confirmed cases & deaths data is fetched from [HS API](https://github.com/HS-Datadesk/koronavirus-avoindata).
- During build, latest Rt estimates is fetched from Azure blob storage, generated by TODO link.
- Note that there are currently **no tests**, so you can break the production build! If that happens, keep calm and rollback.

#### Updating default parameters

You can edit [default_parameters.js](default_parameters.js) right here on GitHub.

#### Updating historical data

Historical estimates are currently worked on in [this spreadsheet](https://docs.google.com/spreadsheets/d/1Yt39KNx0AHYthLZR8acUpIZQwMm4WHeU8A2qIRBdoYI/edit?usp=sharing).

In order to deploy updated estimates, export the spreadsheet as a `.csv` and copy it over to [data/hardcodedHistoricalEstimates.csv](data/hardcodedHistoricalEstimates.csv).
